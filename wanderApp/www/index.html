<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <meta name="msapplication-tap-highlight" content="no" />
<!----------------------------------JQuery CDN----->
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.css" />
		<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>
                <script src="openfb.js"></script>
                <script src="inappbrowser.js"></script>
                <script src="js/post.js"></script>
<!----------------------------------Custom JScript--->
		<script type="text/javascript" src="js/custom.js"></script>

<!----------------------------------Custom CSS----->
        <link rel="stylesheet" href="css/custom.css" />
        
        
        <title>Wander</title>
    </head>
    <body>
    	
<!-------------------------Initialize app in cordova------------------>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>




<!----------------------------Pages start here----------------------------------------->

<div data-role="page" data-theme="b" class="loginPage" id="loginPage">
    
    
    
    <div data-role="content">
        
        <div id="wanderLogoLogin">
        <img src="img/loginLogo.png" alt="image"></img>
        </div><br>
        
        <button class="loginButton" data-theme="a" onclick="loginButton()">Login with Facebook</button>
        
        <br>
        <br>
        <br>
        
        <div id="aboutText" href="www.wander-app.org" style="text-align:center; color:white; text-shadow: none;" ><b>About Wander</b></div>
        <br>
        <a id="aboutWanderIcon">
        <img src="img/webLink.png" id="wanderWebLink" href="www.wander-app.org" alt="image"></img>
        </a>
        
    </div>
</div>

<!----------------------------Login Page Ends----------------------------------------->
<!----------------------------Activity page starts----------------------------------------->


<div data-role="page" id="page-activity" class="page-panel">

    <div data-role="header" id="header" data-position="fixed">
        <h1>Post Feed</h1>
        <a href="#panel" class="panel-toggle">Open left panel</a>
        <a href="#addPostPage" onclick="getInfo()" class="addPost" data-iconpos="right">Create a post</a>
    </div><!-- /header -->
	
    <div data-role="content" id="activityContent">
    	
		<div class="scroll" id="scroll">
		    <ul id="listScroll">
		        <li>
		            <h1>A</h1>
                            <ul>
		                <li>Aa</li>
		                <li>Aa</li>
		                <li>Aa</li>
		                <li>Aa</li>
		                <li>Aa</li>
		            </ul>
		        </li>
		        <li>
		            <h1>B</h1>
		            <ul>
		                <li>Bb</li>
		                <li>Bb</li>
		                <li>Bb</li>
		                <li>Bb</li>
		                <li>Bb</li>
		                <li>Bb</li>
		            </ul>
		        </li>
		        <li>
		            <h1>C</h1>
		            <ul>
		                <li>Cc</li>
		                <li>Cc</li>
		                <li>Cc</li>
		                <li>Cc</li>
		                <li>Cc</li>
		                <li>Cc</li>
		            </ul>
		        </li>
		        <li>
		            <h1>D</h1>
		            <ul>
		                <li>Dd</li>
		                <li>Dd</li>
		                <li>Dd</li>
		                <li>Dd</li>
		            </ul>
		        </li>
		        <li>
		            <h1>E</h1>
		            <ul>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		                <li>Ee</li>
		            </ul>
		        </li>        <li>
		            <h1>F</h1>
		            <ul>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		                <li>Ff</li>
		            </ul>
		        </li>        <li>
		            <h1>G</h1>
		            <ul>
		                <li>Gg</li>
		            </ul>
		        </li>        <li>
		            <h1>H</h1>
		            <ul>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		                <li>Hh</li>
		            </ul>
		        </li>        <li>
		            <h1>I</h1>
		            <ul>
		                <li>Ii</li>
		                <li>Ii</li>
		                <li>Ii</li>
		            </ul>
		        </li>        <li>
		            <h1>J</h1>
		            <ul>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		                <li>Jj</li>
		            </ul>
		        </li>        <li>
		            <h1>K</h1>
		            <ul>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		                <li>Kk</li>
		            </ul>
		        </li>
		    </ul>
		</div><!-- /iscroll list -->
<script type="text/javascript" src="js/iscroll.js"></script>
<script type="text/javascript" src="js/iscroll.stickyheaders.js"></script>
<script type="text/javascript">
    var scroll = new IScroll('#scroll', {
        probeType: 3,
        useTransition: true
    });
    scroll.enableStickyHeaders('h1');
</script>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27773239-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> <!-- /iscroll FUNCTION -->

    </div><!-- /content -->
	
</div>

<!--------ACTIVITY PAGE FEED ENDS HERE---------->
<!----------------------------Post Activity page starts----------------------------------------->


<!--------Create a new POST---------->
<div data-role="page" id="addPostPage" onload="onBodyLoad()">
    
    <script>
        function onBodyLoad() {
            document.addEventListener("deviceready",onDeviceReady,false);
        }
    </script>
	
	<div data-role="header" id="header">
	        <h1>Post Activity</h1>
	    <a href="#page-activity" class="header-buttons">Cancel</a>   
	    <a href="#page-activity" class="header-buttons" data-iconpos="right">Post</a> 
	    
	</div> <!-- /header -->
    
	  
	    
	<div data-role="content">
        
		<div id="landmark-1" data-landmark-id="1">
            <form>
                
                <label for="userPost">
                    <b></b>
                    <textarea id="userPost" name="userPost" cols="30" rows="10"></textarea>
                </label>
                
                <input type="submit" value="Post">
                    </form>
                </div>
        </div> <!-- /content -->
</div>    

<!----------------------------MY POST STARTS HERE----------------------------------------->

<div data-role="page"  id="page-messages" class="page-panel">

    <div data-role="header" id="header">
        <h1>My Posts</h1>
        <a href="#panel" class="panel-toggle">Open left panel</a>
    </div><!-- /header -->
	
    <div data-role="content">
		my post
    </div><!-- /content -->
	
</div>

<!--------MY POST PAGE ENDS HERe---------->
<!----------------------------PROFILE PAGE STARTS HERE----------------------------------------->

<div data-role="page" id="page-profile" class="page-panel">

    <div data-role="header" id="header">
        <h1>Profile</h1>
        <a href="#panel" class="panel-toggle">Open left panel</a>
    </div><!-- /header -->
	
    <div data-role="content">
		
        <div id="profileContainer" style="text-align: center">
        <img id="profilePic" class="profilePicture"< />
        </div>
        <br>
        <div id="profileHeadText">
        <h1 class="profileText" ><span id="profileName"></span>, <span id="profileGender"></span></h1>
        <h1 class="profileText2" ><span id="profileCity"></span></h1>
        <br>
        <br>
        <h1 class="profileTextAbout">About</h1>
        <h1 class="profileTextAbout" ><span id="profileAbout"></span></h1>
       </div>
        
    </div><!-- /content -->
	
</div>


<!--------PROFILE PAGE ENDS HERE---------->

<!----------------------------Settings page starts here----------------------------------------->

<div data-role="page" id="page-settings" class="page-panel">

    <div data-role="header" id="header">
        <h1>Settings</h1>
        <a href="#panel" class="panel-toggle">Open left panel</a>
    </div><!-- /header -->
	
    <div data-role="content" id="settingsPanel">
    	
		<div data-role="fieldcontain" id="searchDistance">			
		    <label for="slider-1">Search Distance <span class="kilometer">km</span></label>	
		    <input type="range" name="slider-1" id="slider-1" min="0" max="200" value="100">    
		</div> 
		
		<div class="ui-field-contain description">
	    	<p>Select a search radius for finding post from other users.</p>
	        </div>
	    
		<div data-role="fieldcontain" id="menSelector" >	
			<label for="flip-1">Men</label>
			<select name="flip-1" id="flip-1" data-role="slider"data-mini="true">
				<option value="off"></option>
				<option selected="selected" value="on"></option>
			</select> 
		</div>
		
		<div data-role="fieldcontain" id="womenSelector" >	
			<label for="flip-2">Women</label>
			<select name="flip-2" id="flip-2" data-role="slider"data-mini="true">
				<option value="off"></option>
				<option selected="selected" value="on"></option>				
			</select> 			
		</div>
		
		<div class="ui-field-contain description">
			<p>Select a gender preference for finding other users post</p>
		</div>
		
		<div data-role="fieldcontain" id="vibrateSelector" >	
		<label for="flip-3">Vibrate On Notification</label>
			<select name="flip-3" id="flip-3" data-role="slider"data-mini="true">
				<option value="off"></option>
				<option selected="selected" value="on"></option>				
			</select> 
		</div>
                <div>
		
  			<button id="logOut" class="btn btn-block" onclick="logout()">Logout</button>
		
		
                </div>
	
		
    </div><!-- /content -->
	
</div>

<!--------SETTINGS PAGE ENDS HERE---------->

<!----------------------------Logout button starts----------------------------------------->

<div data-role="page" id="page-logout" class="page-panel">

    <div data-role="header" id="header">
        <h1>Logout</h1>
        <a href="#panel" class="panel-toggle">Open left panel</a>
    </div><!-- /header -->
	
    <div data-role="content">
		Logout
    </div><!-- /content -->
	
</div>
	
<!--------LOGOUT PAGE ENDS HERE---------->

<!--------FACEBOOK LOGIN---------->

<script>
    
    // Defaults to sessionStorage for storing the Facebook token
    //openFB.init({appId: '371025573052266'});
    
    //  Uncomment the line below to store the Facebook token in localStorage instead of sessionStorage
    openFB.init({appId: '371025573052266', tokenStore: window.localStorage});
    
    
    
    function loginButton() {
        openFB.login(
                     function(response) {
                     if(response.status === 'connected') {
                     alert('Facebook login succeeded, got access token: ' + response.authResponse.token);
                     } else {
                     alert('Facebook login failed: ' + response.error);
                     }
                     }, {scope: 'email,user_location,user_photos,user_hometown,user_about_me'});
                     
                     $.mobile.changePage("#page-activity");
    

    }

function getInfo() {
                     openFB.api({
                                path: '/me',
                                success: function(data) {
                                console.log(JSON.stringify(data));
                                document.getElementById("profileName").innerHTML = data.first_name;
                                document.getElementById("profileGender").innerHTML = data.gender;
                                document.getElementById("profileCity").innerHTML = data.location.name;
                                document.getElementById("profileAbout").innerHTML = data.bio;
                                document.getElementById("profilePic").src = 'http://graph.facebook.com/'+data.id+'/picture?type=large';
                                
                                
                                
                                
                                },
                                
                                error: errorHandler});
}


function logout() {
    openFB.logout(
                  function() {
                  
                  alert('Logout successful');
                  },
                  errorHandler);
                  $.mobile.changePage("#loginPage");
                  tokenStore['fbtoken'] = undefined;
}


function errorHandler(error) {
    alert(error.message);
}


var userInfo = {
    "userName": "profileName",
    "userGender": "profileGender",
    "image": "img/userPic.jpg",
};

//Store the object in local storage
localStorage.setItem('loggedUser', JSON.stringify(userInfo));

// <!--------FACEBOOK LOGOUT----------> //
    </script>
	
	
	
    </body>
</html>
